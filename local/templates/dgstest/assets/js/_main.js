function is_visible(a){var t=$(window).scrollTop(),n=$(window).height(),e=$(a),i=e.offset();return t+n>=e.height()+i.top}function loadingNextPage(a,t){$(".frame-preloader").show(),$("#show-more-btn").text("Загружаем..."),$.ajax({url:a,type:"get",dataType:"html"}).done(function(n){var e=$(n).find(".ajax-news-list").html();t?$(".ajax-news-list").html(e):$(".ajax-news-list").append(e);var i=$(n).find("#show-more-btn").data("next-page");$("#show-more-btn").data("next-page",i),$(".navigation-pages").html($(n).find(".navigation-pages").html()),history.pushState(null,null,a),$("#show-more-btn").text("Показать еще")}).always(function(){$(".frame-preloader").hide(),isLoading=!1})}var isLoading=!1;$(function(){$("#show-more-btn").on("click",function(){var a=$(this).data("next-page");a&&loadingNextPage(a)}),$(".navigation-pages").on("click","a",function(a){a.preventDefault();var t=$(this).attr("href");!isLoading&&t&&($(".ajax-news-list").html(),loadingNextPage(t,!0))}),$(document).on("scroll",function(){var a=$("#show-more-btn").data("next-page");is_visible(".news-list")&&a&&!isLoading&&(isLoading=!0,loadingNextPage(a))})});